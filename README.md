## Karaoke Creator for YouTube Songs

### Setup
Prerequisites:
- Git
- Conda (Miniconda/Anaconda)
- curl (for verifying public S3 access)

Note: ffmpeg and all Python packages are installed during the setup steps below (via conda and `requirements.txt`).

Clone and create environment:
```bash
git clone https://github.com/dage/karaoke karaoke
cd karaoke
conda create -y -n karaoke-yt -c conda-forge python=3.11 yt-dlp ffmpeg
conda activate karaoke-yt
# Install Python dependencies
pip install -r requirements.txt
```

Environment variables:
- Copy `.env_template` to `.env`.
- LLM (required):
  - Set `OPENAI_API_KEY`.
  - `OPENAI_API_ENDPOINT` and `OPENAI_DEFAULT_MODEL` are pre-filled with OpenRouter defaults (`openrouter.ai` endpoint and `openai/gpt-5-chat` slug).
- AWS S3 (optional, for the upload tool):
  - `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `AWS_REGION`, `S3_BUCKET_NAME`
  - Managing access keys: [Managing access keys for IAM users](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)

### Run
```bash
# Run everything (prompts for YouTube URL if not provided): downloads audio and generates words/sentences
python run.py [optional-YouTube-URL]
```

### Outputs
All generated files are initially stored in the `output/` directory. They may be uploaded to S3 using the S3 upload tool.
- `youtube_autosubs.words.txt` — words dataset
- `youtube_autosubs.sentences.txt` — sentences dataset
- `song.mp3` — downloaded audio
- `manifest.json` — summary manifest with file names and original YouTube URL

### Tools
- LLM ping test:
  ```bash
  python tools/ping_openai.py
  ```
- Upload to AWS S3:
  ```bash
  python tools/upload_to_s3.py
  ```
  Uploads everything under `output/` to a unique `karaoke_XXXXX` folder in the specified S3 bucket and writes a temporary `manifest.json` with absolute S3 URLs for all files. Prints the manifest URL as the final line.

### Status
- Works in progress; underlying files are generated by the run script.

### License
MIT — see LICENSE
