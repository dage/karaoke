# Karaoke Creator for YouTube Songs

## Purpose
To more easily learn the lyrics of non-english songs on YouTube.

## Status
- Works in progress; underlying files are generated by the run script which can easily be uploaded to S3 for public access. 
- Next phase: Experiment with development of different user interfaces.

## Setup

### Prerequisites
- Git
- Conda (Miniconda/Anaconda)
- curl (optional, for verifying public S3 access)

### Clone repo and set up environment

```bash
git clone https://github.com/dage/karaoke karaoke
cd karaoke
conda create -y -n karaoke-yt -c conda-forge python=3.11 yt-dlp ffmpeg
conda activate karaoke-yt
pip install -r requirements.txt
```
ffmpeg and all Python packages will be installed (via Conda and `requirements.txt`).

### Environment variables
Copy `.env_template` to `.env`.

- LLM (required for translations):
  - Set your API key in `OPENAI_API_KEY`
  - `OPENAI_API_ENDPOINT` and `OPENAI_DEFAULT_MODEL` are pre-filled with OpenRouter defaults (`openrouter.ai` endpoint and `openai/gpt-5-chat` slug).
- AWS S3 (optional, for the S3 upload tool):
  - `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `AWS_REGION`, `S3_BUCKET_NAME`
  - [Managing access keys](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)

## Run

```bash
python run.py [optional-YouTube-URL]
```
Runs the audio and lyrics extraction (uses a default Thai song if YouTube URL not provided).

## Outputs
All generated files are initially stored in the `output` directory. They may be uploaded to S3 using the S3 upload tool to make public.
- `youtube_autosubs.words.txt` — words tsv dataset
- `youtube_autosubs.sentences.txt` — sentences tsv dataset
- `song.mp3` — extracted audio
- `manifest.json` — summary manifest with file names and original YouTube URL

## Tools
- LLM ping test:
  ```bash
  python tools/ping_openai.py
  ```
- Upload to AWS S3:
  ```bash
  python tools/upload_to_s3.py
  ```
  Uploads everything under `output` to a unique `karaoke_XXXXX` folder in the specified S3 bucket and writes a temporary `manifest.json` with absolute S3 URLs for all files. Prints the manifest URL to easily have a single URL to reference the whole dataset to be shared with online AI agents or vibe coding platforms. Tests the S3 config by using curl to attempt to retrieve the files. Also validates that uploaded assets have correct Content-Type headers, CORS support, and Range request support for browser compatibility.

## License
MIT — see LICENSE
